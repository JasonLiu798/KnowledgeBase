

#CSMA/CD过程
CSMA/CD就像在没有主持人的座谈会中，所有的参加者都通过一个共同的媒介（空气）来相互
交谈。每个参加者在讲话前，都礼貌地等待别人把话讲完。如果两个客人同时开始讲话，那么他们都
停下来，分别随机等待一段时间再开始讲话。这时，如果两个参加者等待的时间不同，冲突就不会出
现。如果传输失败超过一次，将采用退避指数增长时间的方法（退避的时间通过截断二进制指数退避算法(truncated binary exponential backoff)来实现）

#指数退避算法
[浅谈指数退避算法](http://www.tuicool.com/articles/zayq22)
Exponential backoff is an algorithm that 
uses feedback to multiplicatively decrease the rate of some process, in order to gradually find an acceptable rate
网络上的节点在发送数据冲突后，等待一定时间后再发，等待时间是随指数增长，从而避免频繁的触发冲突

具体的退避算法如下：
I.确定基本退避时间，它就是争用期（总线上的单程端到端传播时延记为 x，以太网的端到端往返时间2x）
以太网把争用期定为51.2us。
对于10Mb/s以太网，在争用期内可发送512bit，即64字节。
也可以说争用期是512比特时间。1比特时间就是发送1比特所需要的时间。所以这种时间单位与数据率密切相关。

II.从离散的整数集合[0,1,…,]中随机取出一个数，记为r。
重传应推后的时间就是r倍的争用期。
上面的参数k按下面的公式计算：k=Min[重传次数，10] 可见当重传次数不超过10时，参数k等于重传次数;但当重传次数超过10时，k就不在增大而一直等于10。

III.当重传达16次仍不能成功时(这表明同时打算发送的数据站太多，以致连续发生冲突)，则丢弃该，并向高层报告。
例如，在第1次重传时，k=1，随机数r从整数{0,1}中选一个数。因此重传推迟的时间是0或争用期，在这两个时间中随机选择一个。
若再发生碰撞，则重传时，k=2，随机数r就从整数{0,1,2,3}中选一个数。因此重传推迟的时间是在0,2x ,4x和6x 这4个时间中随机抽取一个。
同样，若在发生碰撞，则重传时k=3，随机数r就从整数{0,1,2,3,4,5,6,7}中选一个数。以此类推。若连续多次发生冲突，就表明可能有较多的站参与争用信道。但使用退避算法可使重传需要推迟的平均时间随重传次数而增大（这也称为动态退避），因而减小发生碰撞的概率，有利于整个系统的稳定。

##场景
场景1：
接入三方支付服务，在三方支付提供的接入接口规范中，服务方交易结束结果通知和商户主动查询交易结果都用到重发机制，这就是所谓的退避算法，这地方其实也引出了另一个知识点——接口的幂等性（ 使用相同参数对同一资源重复调用某个接口的结果与调用一次的结果相同），这里不再过多赘述。

场景2：
在app应用中，很多场景会遇到轮询一类的问题，一般的轮询对于app性能和电量的消耗都是个巨大的灾难。那如何解决这种问题呢？app在上一次更新操作之后还未被使用的情况下，使用指数退避算法来减少更新频率，从而节省资源和减少电的消耗。



















