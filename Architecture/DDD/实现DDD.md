

# C1 入门

# DDD入门
## 目标
可测试、可伸缩、组织良好的软件模型

## 领域专家
精通业务的任何人

## 领域模型
关于某个特定业务的软件模型
数据和行为，表达了准确的业务含义

## 为什么需要DDD
领域专家和开发者在一起工作，密切协作
准确传达业务规则
帮助业务人员自我提高
知识集中，软件知识不是掌握在少数人手中
减少领域专家、开发者、软件本身之间的翻译
设计就是代码，代码就是设计
提供了战略设计+战术设计

## 难以捉摸的业务价值
如何确定某种需求真正的业务价值？
领域专家->重点：交附加值
开发者->重点：技术实现
之间存在鸿沟，软件不能完全反映出领域专家的思维模型
多个领域专家存在分歧，导致产生互相矛盾的软件模型（有时，单个领域专家的需求随着时间也会产生前后矛盾）

### 如何帮助我们
领域专家和开发 一起创建 适用于领域建模的通用语言
关注业务战略

### DDD计分卡
贫血模型


## 如何DDD
### 通用语言
业务-技术直接沟通

### 限界上下文
容纳下一个独立业务领域所使用的通用语言
独立的上下文，限界上下文内语言才通用

## 对业务的价值
领域模型
业务的准确定义
更好的和领域专家沟通
用户体验，因为有技术对于业务的理解
模型边界
企业架构
敏捷、迭代、持续建模
战略战术新工具：

## 挑战
创建通用语言需要时间
持续将领域专家引入
改变开发者思维方式

## 虚构案例
get/set+逻辑代码 -> 有具体业务含义的函数
暴漏数据结构 -> 只暴漏行为
数据属性的关注 -> 对象行为

---
# C2 领域、子域、限界上下文
## 领域
一个组织在业务范围内的业务活动

子域

限界上下文
在一个好的限界上下文中，一个术语，只代表一种领域概念
例如：
顾客，在浏览时，代表 购买情况、忠诚度、折扣等
在下单时，代表 寄送地址、总价等

## 关注点放在核心域上
核心域，主要促成因素
支撑子域，专注于业务某个方面
通用子域

## 战略设计为什么重要
协作上下文-模型名+上下文

## 现实世界中领域和子域
### 问题空间：对问题空间开发产生一个新的核心域
    战略核心域
    支撑子域
问题：
目标
概念

### 解决空间
    一个或多个限界上下文（一组特点软件模型）
问题：
可重用的
需要新建的
怎么集成
核心域的成功概率
术语的统一性
限界上下文的重叠范围
概念和限界上线文的映射

## 理解限界上下文
限界上下文是显式的，充满语义的，语义的边界
避免 大而全的 软件模型
    大项目，所有人，在全局对一个概念达成一致，较困难
集成，需要对不同的上下文进行映射，之间可能共享一些状态

不只包含领域模型，标注一个系统/应用/业务服务

### 范围
对应的整套通用语言
不多（去掉外部概念），也不少（核心概念不遗漏）

过多：导致分不清轻重
过少：会丢失一些上下文概念

不同业务对于同一个概念的关注点不同，使用一个大而全的模型很难达成共识
划好限界上下文，在各自上下文之内定义领域和概念

### 安全权限的处理
职责层:仍然是核心域的一部分，但实际不属于
隔离内核:最终形成单独的上下文



---
# C3 上下文映射图
## 上下文之间的关系
合作
共享内核
客户-供应商
conformist
防腐层 ACL
open host service OHS
发布语言 PL
separate way
大泥球

---
# C4 架构
## 分层
UI
应用层
	AS  应用服务
	不处理业务逻辑
	协调对领域对象的操作，比如聚合
	接收UI的入参，通过资源库获取聚合实例，执行相应命令操作
领域层
基础设施层

严格分层架构，某层只能与直接位于下方的层发生耦合
松散分层架构

底层与高层发生耦合：只限于observer、mediator

## DIP
基础设施层
用户接口
应用层
领域层

## 六边形架构（端口与适配器）
适配器，适配用户请求

## SOA
服务契约，阐述自身功能
松耦合，依赖最小化
服务抽象，只发布契约，隐藏内部逻辑
服务重用，一种服务可被其他服务重用
服务自治，自行控制环境和资源，保持独立，有助于保持服务一致性和可靠性
无状态，可通过服务元数据查找和理解服务
可发现性，可通过服务元数据查找服务和理解服务
组合性，可由其他服务组合而成，不管其他服务大小和复杂性

## REST

## CQRS







































