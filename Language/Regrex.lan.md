#正则表达式
---
#docs
[在线](https://regex101.com/)

---
#模式修正符
比如/esi
下面列出了当前在 PCRE 中可能使用的修正符。括号中是这些修正符的内部 PCRE 名。修正符中的空格和换行被忽略，其它字符会导致错误。
说明
下面列出了当前在 PCRE 中可能使用的修正符。括号中是这些修正符的内部 PCRE 名。修正符中的空格和换行被忽略，其它字符会导致错误。

##i (PCRE_CASELESS) 
如果设定此修正符，模式中的字符将同时匹配大小写字母
##s（PCRE_DOTALL）
如果设定了此修正符，模式中的圆点元字符（.）匹配所有的字符，包括换行符。没有此设定的话，则不包括换行符。这和 Perl 的 /s 修正符是等效的。排除字符类例如 [^a] 总是匹配换行符的，无论是否设定了此修正符。
## m（PCRE_MULTILINE）     
默认情况下，PCRE 将目标字符串作为单一的一“行”字符所组成的（甚至其中包含有换行符也是如此）。“行起始”元字符（^）仅仅匹配字符串的起始，“行结束”元字符（$）仅仅匹配字符串的结束，或者最后一个字符是换行符时其前面（除非设定了 D 修正符）。这和 Perl 是一样的。
当设定了此修正符，“行起始”和“行结束”除了匹配整个字符串开头和结束外，还分别匹配其中的换行符的之后和之前。这和 Perl 的 /m 修正符是等效的。如果目标字符串中没有“n”字符或者模式中没有 ^ 或 $，则设定此修正符没有任何效果。

##e     
如果设定了此修正符，preg_replace() 在替换字符串中对逆向引用作正常的替换，将其作为 PHP 代码求值，并用其结果来替换所搜索的字符串。
只有 preg_replace() 使用此修正符，其它 PCRE 函数将忽略之。
注: 本修正符在 PHP3 中不可用。

##x（PCRE_EXTENDED）      
如果设定了此修正符，模式中的空白字符除了被转义的或在字符类中的以外完全被忽略，在未转义的字符类之外的 # 以及下一个换行符之间的所有字符，包括两头，也都被忽略。这和 Perl 的 /x 修正符是等效的，使得可以在复杂的模式中加入注释。然而注意，这仅适用于数据字符。空白字符可能永远不会出现于模式中的特殊字符序列，例如引入条件子模式的序列 (?( 中间。

##A（PCRE_ANCHORED）
如果设定了此修正符，模式被强制为“anchored”，即强制仅从目标字符串的开头开始匹配。此效果也可以通过适当的模式本身来实现（在 Perl 中实现的唯一方法）。

当一个模式将被使用若干次时，为加速匹配起见值得先对其进行分析。如果设定了此修正符则会进行额外的分析。目前，分析一个模式仅对没有单一固定起始字符的 non-anchored 模式有用。

##D（PCRE_DOLLAR_ENDONLY）
如果设定了此修正符，模式中的美元元字符仅匹配目标字符串的结尾。没有此选项时，如果最后一个字符是换行符的话，美元符号也会匹配此字符之前（但不会匹配任何其它换行符之前）。如果设定了 m 修正符则忽略此选项。Perl 中没有与其等价的修正符。

##U（PCRE_UNGREEDY）
本修正符反转了匹配数量的值使其不是默认的重复，而变成在后面跟上“?”才变得重复。这和 Perl 不兼容。也可以通过在模式之中设定 (?U) 修正符或者在数量符之后跟一个问号（如 .*?）来启用此选项。

##X（PCRE_EXTRA）
此修正符启用了一个 PCRE 中与 Perl 不兼容的额外功能。模式中的任何反斜线后面跟上一个没有特殊意义的字母导致一个错误，从而保留此组合以备将来扩充。默认情况下，和 Perl 一样，一个反斜线后面跟一个没有特殊意义的字母被当成该字母本身。当前没有其它特性受此修正符控制。
u（PCRE_UTF8）
此修正符启用了一个 PCRE 中与 Perl 不兼容的额外功能。模式字符串被当成 UTF-8。本修正符在 Unix 下自 PHP 4.1.0 起可用，在 win32 下自 PHP 4.2.3 起可用。自 PHP 4.3.5 起开始检查模式的 UTF-8 合法性。

#定界符
除了字母、数字和反斜线\以外的任何字符都可以为定界符号，比如 | |、//、{}、!!等等，但是需要注意，如果没有特殊需要，我们都使用正斜线//作为正则表达式的定界符号。


---


---
#常用
##匹配汉字
$pattern = '/[\x{4e00}-\x{9fa5}A-Za-z]/u';
/u 字符串unicode
匹配中文字符的正则表达式： [\u4e00-\u9fa5]
匹配双字节字符(包括汉字在内)：[^\x00-\xff]

##数字
```bash
#非负整数（正整数 + 0）
^\d+$　　
#正整数
^[0-9]*[1-9][0-9]*$　
#非正整数（负整数 + 0）　
^((-\d+)|(0+))$　　
#负整数
^-[0-9]*[1-9][0-9]*$
#整数
^-?\d+$
#非负浮点数（正浮点数 + 0）
^\d+(\.\d+)?$
#正浮点数
^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$
#非正浮点数（负浮点数 + 0）
^((-\d+(\.\d+)?)|(0+(\.0+)?))$
#负浮点数
^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$
#浮点数
^(-?\d+)(\.\d+)?$
#电话号码
/^((\+?[0-9]{2,4}\-[0-9]{3,4}\-)|([0-9]{3,4}\-))?([0-9]{7,8})(\-[0-9]+)?$/
#ip
^(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5])$

#QQ号
^[1-9]*[1-9][0-9]*$
#帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)
^[a-zA-Z][a-zA-Z0-9_]{4,15}$
#国内电话号码
(\d{3}-|\d{4}-)?(\d{8}|\d{7})?

#身份证
preg_match("/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/",$id_card)
preg_match("/^(\d{6})(18|19|20)?(\d{2})([01]\d)([0123]\d)(\d{3}) (\d|X)?$/",$id_card)
preg_match("/(^\d{15}$/)|(\d{17}(?:\d|x|X)$/)",$id_card)
if (!(/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/.test(num)))

```

##字母/字符串
^[A-Za-z]+$　　//由26个英文字母组成的字符串
^[A-Z]+$　　//由26个英文字母的大写组成的字符串
^[a-z]+$　　//由26个英文字母的小写组成的字符串
^[A-Za-z0-9]+$　　//由数字和26个英文字母组成的字符串
^\w+$　　//由数字、26个英文字母或者下划线组成的字符串
匹配空行的正则表达式：\n[\s| ]*\r
匹配首尾空格的正则表达式：(^\s*)|(\s*$)


##url
^[a-zA-z]+://(\w+(-\w+)*)(\.(\w+(-\w+)*))*(\?\S*)?$　　//url
匹配网址URL的正则表达式：^[a-zA-z]+://(\\w+(-\\w+)*)(\\.(\\w+(-\\w+)*))*(\\?\\S*)?$


##email地址
^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$　　　　
^([w-.]+)@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.)|(([w-]+.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(]?)$ //Email
匹配Email地址的正则表达式：\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*

##日期
19. /^(d{2}|d{4})-((0([1-9]{1}))|(1[1|2]))-(([0-2]([1-9]{1}))|(3[0|1]))$/ // 年-月-日
20. /^((0([1-9]{1}))|(1[1|2]))/(([0-2]([1-9]{1}))|(3[0|1]))/(d{2}|d{4})$/ // 月/日/年

##html
匹配HTML标记的正则表达式：/<(.*)>.*<\/\1>|<(.*) \/>/


37. 元字符及其在正则表达式上下文中的行为：
38.
39. \ 将下一个字符标记为一个特殊字符、或一个原义字符、或一个后向引用、或一个八进制转义符。
40.
41. ^ 匹配输入字符串的开始位置。如果设置了 RegExp 对象的Multiline 属性，^ 也匹配 ’\n’ 或 ’\r’ 之后的位置。
42.
43. $ 匹配输入字符串的结束位置。如果设置了 RegExp 对象的Multiline 属性，$ 也匹配 ’\n’ 或 ’\r’ 之前的位置。
44.
45. * 匹配前面的子表达式零次或多次。
46.
47. + 匹配前面的子表达式一次或多次。+ 等价于 {1,}。
48.
49. ? 匹配前面的子表达式零次或一次。? 等价于 {0,1}。
50.
51. {n} n 是一个非负整数，匹配确定的n 次。
52.
53. {n,} n 是一个非负整数，至少匹配n 次。
54.
55. {n,m} m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。在逗号和两个数之间不能有空格。
56.
57. ? 当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。
58.
59. . 匹配除 "\n" 之外的任何单个字符。要匹配包括 ’\n’ 在内的任何字符，请使用象 ’[.\n]’ 的模式。
60. (pattern) 匹配pattern 并获取这一匹配。
61.
62. (?:pattern) 匹配pattern 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。
63.
64. (?=pattern) 正向预查，在任何匹配 pattern 的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。
65.
66. (?!pattern) 负向预查，与(?=pattern)作用相反
67.
68. x|y 匹配 x 或 y。
69.
70. [xyz] 字符集合。
71.
72. [^xyz] 负值字符集合。
73.
74. [a-z] 字符范围，匹配指定范围内的任意字符。
75.
76. [^a-z] 负值字符范围，匹配任何不在指定范围内的任意字符。
77.
78. \b 匹配一个单词边界，也就是指单词和空格间的位置。
79.
80. \B 匹配非单词边界。
81.
82. \cx 匹配由x指明的控制字符。
83.
84. \d 匹配一个数字字符。等价于 [0-9]。
85.
86. \D 匹配一个非数字字符。等价于 [^0-9]。
87.
88. \f 匹配一个换页符。等价于 \x0c 和 \cL。
89.
90. \n 匹配一个换行符。等价于 \x0a 和 \cJ。
91.
92. \r 匹配一个回车符。等价于 \x0d 和 \cM。
93.
94. \s 匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。
95.
96. \S 匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。
97.
98. \t 匹配一个制表符。等价于 \x09 和 \cI。
99.
100. \v 匹配一个垂直制表符。等价于 \x0b 和 \cK。
101.
102. \w 匹配包括下划线的任何单词字符。等价于’[A-Za-z0-9_]’。
103.
104. \W 匹配任何非单词字符。等价于 ’[^A-Za-z0-9_]’。
105.
106. \xn 匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。
107.
108. \num 匹配 num，其中num是一个正整数。对所获取的匹配的引用。
109.
110. \n 标识一个八进制转义值或一个后向引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为后向引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。
111.
112. \nm 标识一个八进制转义值或一个后向引用。如果 \nm 之前至少有is preceded by at least nm 个获取得子表达式，则 nm 为后向引用。如果 \nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的后向引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \nm 将匹配八进制转义值 nm。
113.
114. \nml 如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。
115.
116. \un 匹配 n，其中 n 是一个用四个十六进制数字表示的Unicode字符。
117.
118. 匹配中文字符的正则表达式： [u4e00-u9fa5]
119.
120. 匹配双字节字符(包括汉字在内)：[^x00-xff]
121.
122. 匹配空行的正则表达式：n[s| ]*r
123.
124. 匹配HTML标记的正则表达式：/<(.*)>.*</1>|<(.*) />/
125.
126. 匹配首尾空格的正则表达式：(^s*)|(s*$)
127.
128. 匹配Email地址的正则表达式：w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*
129.
130. 匹配网址URL的正则表达式：http://([w-]+.)+[w-]+(/[w- ./?%&=]*)?
131.
132. 利用正则表达式限制网页表单里的文本框输入内容：
133.
134. 用正则表达式限制只能输入中文：onkeyup="value=value.replace(/[^u4E00-u9FA5]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^u4E00-u9FA5]/g,''))"
135.
136. 用正则表达式限制只能输入全角字符： onkeyup="value=value.replace(/[^uFF00-uFFFF]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^uFF00-uFFFF]/g,''))"
137.
138. 用正则表达式限制只能输入数字：onkeyup="value=value.replace(/[^d]/g,'') "onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^d]/g,''))"
139.
140. 用正则表达式限制只能输入数字和英文：onkeyup="value=value.replace(/[W]/g,'') "onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^d]/g,''))"
141.
142. =========常用正则式
143.
144.
145.
146. 匹配中文字符的正则表达式： [\u4e00-\u9fa5]
147.
148. 匹配双字节字符(包括汉字在内)：[^\x00-\xff]
149.
150. 匹配空行的正则表达式：\n[\s| ]*\r
151.
152. 匹配HTML标记的正则表达式：/<(.*)>.*<\/\1>|<(.*) \/>/
153.
154. 匹配首尾空格的正则表达式：(^\s*)|(\s*$)
155.
156. 匹配IP地址的正则表达式：/(\d+)\.(\d+)\.(\d+)\.(\d+)/g //
157.
158. 匹配Email地址的正则表达式：\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*
159.
160. 匹配网址URL的正则表达式：http://(/[\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?
161.
162. sql语句：^(select|drop|delete|create|update|insert).*$
163.
164. 1、非负整数：^\d+$
165.
166. 2、正整数：^[0-9]*[1-9][0-9]*$
167.
168. 3、非正整数：^((-\d+)|(0+))$
169.
170. 4、负整数：^-[0-9]*[1-9][0-9]*$
171.
172. 5、整数：^-?\d+$
173.
174. 6、非负浮点数：^\d+(\.\d+)?$
175.
176. 7、正浮点数：^((0-9)+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$
177.
178. 8、非正浮点数：^((-\d+\.\d+)?)|(0+(\.0+)?))$
179.
180. 9、负浮点数：^(-((正浮点数正则式)))$
181.
182. 10、英文字符串：^[A-Za-z]+$
183.
184. 11、英文大写串：^[A-Z]+$
185.
186. 12、英文小写串：^[a-z]+$
187.
188. 13、英文字符数字串：^[A-Za-z0-9]+$
189.
190. 14、英数字加下划线串：^\w+$
191.
192. 15、E-mail地址：^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$
193.
194. 16、URL：^[a-zA-Z]+://(\w+(-\w+)*)(\.(\w+(-\w+)*))*(\?\s*)?$
195. 或：^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$
196.
197. 17、邮政编码：^[1-9]\d{5}$
198.
199. 18、中文：^[\u0391-\uFFE5]+$
200.
201. 19、电话号码：^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$
202.
203. 20、手机号码：^((\(\d{2,3}\))|(\d{3}\-))?13\d{9}$
204.
205. 21、双字节字符(包括汉字在内)：^\x00-\xff
206.
207. 22、匹配首尾空格：(^\s*)|(\s*$)（像vbscript那样的trim函数）
208.
209. 23、匹配HTML标记：<(.*)>.*<\/\1>|<(.*) \/>
210.
211. 24、匹配空行：\n[\s| ]*\r
212.
213. 25、提取信息中的网络链接：(h|H)(r|R)(e|E)(f|F) *= *('|")?(\w|\\|\/|\.)+('|"| *|>)?
214.
215. 26、提取信息中的邮件地址：\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*
216.
217. 27、提取信息中的图片链接：(s|S)(r|R)(c|C) *= *('|")?(\w|\\|\/|\.)+('|"| *|>)?
218.
219. 28、提取信息中的IP地址：(\d+)\.(\d+)\.(\d+)\.(\d+)
220.
221. 29、提取信息中的中国手机号码：(86)*0*13\d{9}
222.
223. 30、提取信息中的中国固定电话号码：(\(\d{3,4}\)|\d{3,4}-|\s)?\d{8}
224.
225. 31、提取信息中的中国电话号码（包括移动和固定电话）：(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}
226.
227. 32、提取信息中的中国邮政编码：[1-9]{1}(\d+){5}
228.
229. 33、提取信息中的浮点数（即小数）：(-?\d*)\.?\d+
230.
231. 34、提取信息中的任何数字 ：(-?\d*)(\.\d+)?
232.
233. 35、IP：(\d+)\.(\d+)\.(\d+)\.(\d+)
234.
235. 36、电话区号：/^0\d{2,3}$/
236.
237. 37、腾讯QQ号：^[1-9]*[1-9][0-9]*$
238.
239. 38、帐号(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$
240.
241. 39、中文、英文、数字及下划线：^[\u4e00-\u9fa5_a-zA-Z0-9]+$


