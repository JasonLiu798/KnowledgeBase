#OS
---
[如何从零开始写一个简单的操作系统](https://www.zhihu.com/question/25628124)


#进程与线程区别
主要差别在于它们是不同的操作系统资源管理方式；
一个程序至少有一个进程,一个进程至少有一个线程；
线程的划分尺度小于进程，使得多线程程序的并发性高；
#进程
##概念
具有一定独立功能的程序关于某个数据集合上的一次运行活动，进程是系统进行资源分配和调度的一个独立单位.
##资源
进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。
##内存
在执行过程中拥有独立的内存单元
##执行过程
进程切换时，耗费资源较大，效率要差一些

#线程
##概念
进程的一个实体,是CPU调度和分派的基本单位,它是比进程更小的能独立运行的基本单位.
##资源
线程自己基本上不拥有系统资源，只拥有一点在运行中必不可少的资源(如程序计数器,一组寄存器和栈)
与同属一个进程的其他的线程共享进程所拥有的全部资源.
线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间
##内存
多个线程共享内存，从而极大地提高了程序的运行效率
##执行过程
每个独立的线程有一个程序运行的入口、顺序执行序列和程序的出口。但是线程不能够独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制
一个线程可以创建和撤销另一个线程；
同一个进程中的多个线程之间可以并发执行；
一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮
##多线程的意义
从逻辑角度来看，在于一个应用程序中，有多个执行部分可以同时执行。但操作系统并没有将多个线程看做多个独立的应用，来实现进程的调度和管理以及资源分配。这就是进程和线程的重要区别
对于一些要求同时进行并且又要共享某些变量的并发操作，只能用线程，不能用进程



##实现
内核线程KLT
用户线程UT
    用户空间
混合实现





#并发 并行概念
并发：同一时间应对多件事的能力
并行：同一时间动手做多件事的能力
传统“线程与锁”并没有显示支持并行
并发执行通常是不确定的，随事件时序改变给出不同结果
并行程序可能是确定的

##并行架构
位级
指令级
    流水线、乱序、猜测执行
数据级
    SIMD，图形处理
任务级
    内存模型

并发编程中如果某件事可能会发生，那么不论多艰难他一定会发生，而且可能发生在最不利的时刻。

死锁
全局固定顺序获取多把锁
在持有锁时，不要调用外星方法
持有锁的时间尽可能短
































