#Requirements Analysis
---

#初识
爱因斯坦曾说如果他有一个小时来拯救世界 他将花55分
钟去定义这个问题 而只花5分钟去解决这个问题;

##需求
软件信息化管理不是包治百病的神药。很多项目的失败都归因与项目目标不明确造成的项目范围的失控;
需求是可以做加法和减法的;
用户提出的需求 或许不是需求的初衷或者实际诉求;
不同视角和高度对业务的诉求是不一致的;
大师说 需求是迭代的 不可能一步到位 需求捕获->需求整理->需求验证->再需求捕获

##需求过程的需要执行的要素
统一语言-没有统一语言 统一的定义 所有的沟通都是无效的 
需求收集-需求收集需要从多个角度去考虑问题,满足业务的完整性 
核心问题挖掘-不直达需求的心灵深处 与愿景是有偏差的
需求列表-简要的描述业务需求  用于跟踪和变更管理 验证产品
需求延伸-识别需求影响的上下文 进一步验证产品的合理性

#收集
##需求收集 初步验证的的过程
* 区分”什么”与”怎么”,先区分是什么问题,不时急于考虑”怎么”实现,先关注需求本身,而非过早的考虑设计; 
* 合理性及完整性-需求背景
需求的陈述是业务需要 WANT 而需求背景告诉我们系统为什么要做某件事 NEED 分析需求的合理性  
* 需求的一致性
迭代过程中是否前后矛盾 需推理和综合分析
* 需求的兼容性
迭代过程中注意需求的,若与线上版本的不兼容,会造成不同程度的损失 
* 去除无效的需求信息

##总体业务流程 
* 识别业务领域的主流程
从组织机构 企业愿意 业务架构或者需求上下文 去识别核心流程 粗况 顶层的
例如：电商的购物主流程 财物的结算流程 物流领域的物流跟踪流程等

识别主业务流程有利于确认我们的需求范围及需求目标，可以从主业务流程进行后续的拆解分析

##功能角色分析与用例图
UML 一种静态模型 面向对象OOA/D 核心视图
参与者(actor) 用例(Use Case) 系统边界(Boun)
是角色与业务的对应关系 是站在用户的角度上去考虑的 是一种场景  不描述流程

怎么分析用例?
有信息化经验的用户 会拆分好需求点 从需求点入手
如果没有经验的用户 只是描述了总体需求 这时就要进行业务功能的拆解了

还有如果系统业务复杂了 一堆用例需要怎么去管理 需要分模块梳理
先从组织进行分析 分析出组织的角色  子系统  功能模块 
复杂的流程 拆分具体的每个业务场景 拆分成一个一个用例

##业务流程分析
用例图是静态模型 需要结合动态模型进行业务分析 只见树木不见森林 

过早的对整体进行拆解 缺乏对整体流程的描述 ,UML的行动图和状态图 可以补这一缺陷  

###行动图(Active Diagram)
类似于我们过去的流程图,是UML里面描述流程与分支的视图

###状态图(Statechart Diagram)
一个对象基于事件反应的动态行为,分析复杂的行为状态变化, 只有需要用到的常景才会使用,事件驱动的动态建模

##业务领域分析
需求分析中 关于业务实体的分析 之前介绍的模型涉及的都是人机交互的分析与整理 业务流程分析是动态的行为 那么承载这些行为的会是实体 是一种静态模型分析
我们的软件系统 豪不夸张的说 就是我们现实世界的模拟 
```
事物->实体
职责->职责
行为->函数
```

* 何谓“业务领域”?  
需求提出方,客户所在的知识领域 财务人员所在的领域是财务领域 营销人员所在的领域是营销领域  也就是核心问题域 通过不断的与客户交流 和其他方法获取领域的相关知识 进行业务建模 随着认识的不断深入 模型就会逐步完善 ;不是一锤子买卖了;
 
###原文分析法 Textual Analysis  
在用例分析的基础上进行的业务领域分析，是一项在需求研讨会后整理和分析需求的工作。采用原文分析法之前我们首先应当将业务需求整理成用例模型，为每个用例编写用例说明。在编写完成了用例说明之后，我们才可以开始进行原文分析。

用例标识 | FFYGGZ-01 | 用例名称 | 发放员工工资
---------|-----------|----------|---------------
用例说明 | 人力资源每月依次对员工档案中的所有员工填写工资项目。在完成所有员工工资的填写以后执行工资发放操作，完成工资的发放，并打印出工资表来。
前置事件 | 员工档案已经建立好 | 触发条件 | 人力资源进入工资填写功能
基本流程 | 1.人力资源进入工资填写模块，在一个表格中显示出员工档案中的所有员工；2. 依次为每个员工填写各个工资项目，包括基本工资、考核工资、业务费、项目提成、奖金、个人所得税、住房公积金、养老保险、失业保险、工伤保险、迟到扣款、早退扣款、旷工扣款、请假扣款；3. 根据填写的内容计算出应发工资与实发工资；4. 完成所有员工工资项目的填写后，执行工资发放操作；5. 打印工资表。
后置条件 |    当月的工资表被确定下来并不能再修改
假设与约定 | 1．员工工资项目未完成填写前不能执行工资发放操作；2．应发工资=基本工资+考核工资+业务费+项目提成+奖金 3．实发工资=应发工资-个人所得税-住房公积金-养老保险-失业保险-工伤保险-迟到扣款-早退扣款-旷工扣款-请假扣款
业务需求列表 | 某某1.0 人力资源手动填写所有员工的工资项目 2013-11-23；某某1.0 系统自动计算出应发工资与实发工资 2013-11-23；某某1.0 工资表填写完成以后经过确认才能发放工资 2013-11-23；某某1.0 工资发放以后就不能再修改 2013-11-23

事件流的文字描述进行原文分析。
首先，将文字描述中的名词提取出来，它们包括人力资源、员工档案、员工、工资项目、基本工资、考核工资、业务费、项目提成、奖金、个人所得税、住房公积金、养老保险、失业保险、工伤保险、迟到扣款、早退扣款、旷工扣款、请假扣款应发工资、实发工资、工资表。注意，在原文中还有一些名词并不代表相关业务，如“表格”、“模块”等。这些名词应当被忽略
然后，我们开始逐一对这些名词进行分析。并不是所有名称都应当进入领域模型，那些本次需求范围之外的事物应当被排除，它们包括参与者与外部系统。参与者就是触发本用例某些操作的人或设备，如这里的人力资源。参与者还包括系统在某个固定周期触发的操作，如每个一小时触发一次、每天某个时间点触发，以及月末触发。外部系统就是本业务范围需要调用、抽取、访问的外部系统，如HR系统、项目管理系统等等。为了描述的需要，有时也将外部系统绘制在领域模型中，但应当特殊注明。

名词在领域模型中的存在形式可能有两种：类与类中的属性
动词进行分析。本例在用例说明中事件流的文字描述，包含以下动词：显示、填写、计算、发放、打印、暂存。原文分析中对动词的分析，就是在分析领域模型中各个类的相互协作，进而形成类的方法。

需求总是在变化的，因此我们的领域模型总是在跟着变化。如果我们采用原文分析法，那么总是先变更用例模型，这种变更可能是增加新的用例，也可能是变更既有用例的事件流。然后，我们根据用例模型变更的部分，重新进行原文分析，然后调整我们的领域模型。

名词在领域模型中的存在形式可能有两种：类与类中的属性

动词进行分析。本例在用例说明中事件流的文字描述，包含以下动词：显示、填写、计算、发放、打印、暂存。原文分析中对动词的分析，就是在分析领域模型中各个类的相互协作，进而形成类的方法。

###领域驱动设计Domain-Driven Design
2004年著名建模专家Eric Evans发表了他最具影响力的书籍:《Domain-Driven Design: Tackling Complexity in the Heart of Software》(中文译名：领域驱动设计：软件核心复杂性应对之道)，书中提出了领域驱动设计(简称 DDD)的概念。

领域驱动设计事实上是针对OOAD的一个扩展和延伸，DDD基于面向对象分析与设计技术，基于领域驱动的设计，保证了系统的可维护性、扩展性和复用性，在处理复杂业务逻辑方面有着先天的优势。

大师就是大师 大师是生活在太空里的  如果我们追随大师就会因为缺氧而死掉 

有效建模 ？
统一业务语言 ？ 
模型是迭代的 ？
充血模型？

面对复杂的业务场景和需求，需要领域建模去分析复杂性 解决复杂性的问题

那么如何在去实现领域驱动设计呢？我们总结了以下四个步骤：
1、确定业务服务（Business Service）：根据业务需求和功能模块划分，确定业务单元，每个Business Service是一个内聚的业务单元，覆盖相关的领域对象。
2、定义领域对象（Entity， VO）：根据业务单元的业务逻辑定义领域对象。
3、定义领域对象的属性和关联关系：确定领域对象的各种属性和各个领域对象之间的关联关系。
4、为领域对象增加行为：根据业务需求（系统用例和界面原型等）为领域对象增加行为，并定义哪些方法要被业务服务引用。


###四色原形
在企业应用的上下文中，四色原型是领域模型的一种原型，原型的意思是指领域中的任何模型及其关系都可以抽象为“四色原型”
某个人（Party）的角色（PartyRole）在某个地点（Place）的角色（PlaceRole）用某个东西（Thing）的角色（ThingRole）做了某件事情（MomentInterval）

PartPlaceThing：简称PPT，用淡绿色表示，常见的PPT有：部门、岗位、人员、地点、物品等。
Description：简称Des，用淡蓝色表示，主要用来对PPT进行描述，常见的Des有：部门类型、岗位层级、人员类型、地点区域、物品分类等。
Role：用淡黄色表示，主要表示PPT在某个场景下扮演的角色，常见的角色有：财务类部门、管理类岗位、请假者、销售点、产品等。
MomentInterval：简称MI，用淡红色表示，主要表示在一刻或一段时间内发生的一件事情，常见的MI有：部门移动、岗位移动、员工离职、产品销售等。

一个模块，必须有活动（MI）、参加活动的对象（Role），以及活动资源（PPT），才能组成一个有业务含义的模块。


###需求拆分
拆分的依据如下：
1、  每个拆分出来的条目都是可单独验证并上线的；
2、  每个拆分出来的条目都是可以在单个迭代内完成的
检查每天的工作进展是否按照迭代计划在进行，永远确保资源投入在高优先级的Backlog上

##需求列表
需求列表是从用户的角度来描述用户渴望得到的功能。一个好的列表包括三个要素：
1.角色：谁要使用这个功能。
2. 活动：需要完成什么样的功能。
3. 商业价值：为什么需要这个功能，这个功能带来什么样的价值。
用户故事通常按照如下的格式来表达：作为一个<角色>, 我想要<活动>, 以便于<商业价值>。举例：
作为一个“网站管理员”，我想要“统计每天有多少人访问了我的网站”，以便于“我的赞助商了解我的网站会给他们带来什么收益。”

##快速原形法
由于种种原因，在需求分析阶段得到完全、一致、准确、合理的需求说明是很困难的，在获得一组基本需求说明后，就快速地使其“实现”，通过原型反馈，加深对系统的理解，并满足用户基本要求，使用户在试用过程中受到启发，对需求说明进行补充和精确化，消除不协调的系统需求，逐步确定各种需求，从而获得合理、协调一致、无歧义的、完整的、现实可行的需求说明。

捕捉需求->原形开发->确认需求->再捕获需求

##快速原形法
快速原形使和需求方交流变得直观生动
需求方能直接得到快感 需求会被激发出来 而不是枯燥的文字游戏
随着需求的不断深入 模型将检查、测试、修改 直至满足客户的最终需求
只关注功能，不考虑开发工具、性能、容错、未来实际运行环境等。

##还原需求本身 统一业务语言




##非功能需求
可用性    
可靠性   
可支持性
性能
其他


---
#需求说明书
##引言
* 编写目的
* 业务背景   
* 项目背景
* 项目目标   
* 名词定义

##概述    
* 业务架构
* 整体流程分析   
* 整体用例
* 角色分析  

##功能需求   
* 功能模块
* 用例图    
* 用例说明
* 领域模型

##非功能需求   

##接口需求
* 接口方案
* 接口定义   






